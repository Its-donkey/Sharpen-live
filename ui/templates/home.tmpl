{{define "home"}}
{{template "base" .}}
{{end}}

{{define "content"}}
<main class="surface" id="home-view" aria-labelledby="streamers-title">
  <section class="intro">
    <h2 id="streamers-title">Live Knife Sharpening Studio</h2>
    <p class="intro-lede">
      Connect with bladesmiths and knife sharpeners who stream their craft live. See who is on now or prepping, drop into their sessions, and use partner booking links to send your knives in for a professional edge.
    </p>
    {{if .RosterError}}
      <div class="submit-streamer-result" data-state="error">{{.RosterError}}</div>
    {{end}}
  </section>

  <section class="streamer-table" aria-label="Sharpen Live streamer roster">
    <table>
      <thead>
        <tr>
          <th scope="col">Status</th>
          <th scope="col">Name</th>
          <th scope="col">Streaming Platforms</th>
          <th scope="col">Language</th>
        </tr>
      </thead>
      <tbody>
        {{range .Streamers}}
          <tr>
            <td data-label="Status">
              <span class="status {{statusClass .Status}}">{{statusLabel .Status .StatusLabel}}</span>
            </td>
            <td data-label="Name">
              <strong><a class="platform-link" href="/streamers/{{.ID}}">{{.Name}}</a></strong>
              {{if .Description}}
                <div class="streamer-description">{{.Description}}</div>
              {{end}}
            </td>
            <td data-label="Streaming Platforms">
              {{if .Platforms}}
                <ul class="platform-list">
                  {{range .Platforms}}
                    {{$isYouTube := eq (lower .Name) "youtube"}}
                    <li>
                      {{if .ChannelURL}}
                        <a class="platform-link {{if $isYouTube}}platform-youtube{{end}}" href="{{.ChannelURL}}" target="_blank" rel="noopener noreferrer">
                          {{if $isYouTube}}<span class="sr-only">YouTube</span>{{else}}{{.Name}}{{end}}
                        </a>
                      {{else}}
                        <span class="platform-link {{if $isYouTube}}platform-youtube{{end}}" aria-disabled="true">
                          {{if $isYouTube}}<span class="sr-only">YouTube</span>{{else}}{{.Name}}{{end}}
                        </span>
                      {{end}}
                    </li>
                  {{end}}
                </ul>
              {{else}}—{{end}}
            </td>
            <td data-label="Language">
              <span class="lang">
                {{if .Languages}}{{join .Languages " · "}}{{else}}—{{end}}
              </span>
            </td>
          </tr>
        {{else}}
          <tr><td colspan="4" class="table-status">No streamers available at the moment.</td></tr>
        {{end}}
      </tbody>
    </table>
  </section>

  {{template "submit_form" .Submit}}
</main>
{{end}}
